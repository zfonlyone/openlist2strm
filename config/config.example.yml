# OpenList2STRM 配置文件

# OpenList 配置
openlist:
  # OpenList 访问地址
  host: http://openlist:5244
  # OpenList API Token (在 OpenList 管理后台获取)
  token: your-openlist-token
  # 请求超时时间 (秒)
  timeout: 30

# 路径配置
paths:
  # 源路径 (OpenList 中需要监控的路径)
  source:
    - /115/电影
    - /115/电视剧
    - /115/动漫
    - /115/综艺
  # STRM 文件输出路径
  output: /strm

# 路径映射配置
# 将 OpenList 路径转换为 STRM 文件中的 URL
# 格式: OpenList路径前缀: URL前缀
path_mapping:
  # 示例: /115/电影/xxx.mp4 -> http://openlist:5244/d/115/电影/xxx.mp4
  /115: http://openlist:5244/d/115

# STRM 文件配置
strm:
  # 支持的视频文件扩展名
  extensions:
    - .mp4
    - .mkv
    - .avi
    - .ts
    - .wmv
    - .rmvb
    - .mov
    - .flv
    - .m2ts
    - .webm
  # 是否保持源目录结构
  keep_structure: true
  # 是否使用 URL 编码路径
  url_encode: true

# QoS 限流配置
qos:
  # 每秒请求数限制
  qps: 5
  # 最大并发请求数
  max_concurrent: 3
  # 请求间隔 (毫秒)
  interval: 200

# 定时任务配置
schedule:
  # 是否启用定时任务
  enabled: true
  # Cron 表达式 (分 时 日 月 周)
  # 默认每天凌晨 2 点执行
  cron: "0 2 * * *"
  # 启动时是否立即执行一次
  on_startup: false

# 增量更新配置
incremental:
  # 是否启用增量更新
  enabled: true
  # 检测方式: mtime (修改时间) | size (文件大小) | both (两者都检测)
  check_method: mtime

# Telegram 机器人配置
telegram:
  # 是否启用 Telegram 机器人
  enabled: false
  # 机器人 Token (从 @BotFather 获取)
  token: your-telegram-bot-token
  # 允许使用的用户 ID 列表 (留空允许所有用户)
  allowed_users: []
  # 通知设置
  notify:
    # 扫描开始时通知
    on_scan_start: true
    # 扫描完成时通知
    on_scan_complete: true
    # 发生错误时通知
    on_error: true

# Web 管理界面配置
web:
  # 是否启用 Web 界面
  enabled: true
  # 监听端口
  port: 9527
  # 认证配置 (可选)
  auth:
    enabled: false
    username: admin
    password: admin

# 日志配置
logging:
  # 日志级别: DEBUG | INFO | WARNING | ERROR
  level: INFO
  # 日志保留天数
  retention_days: 7
  # 是否输出彩色日志
  colorize: true
